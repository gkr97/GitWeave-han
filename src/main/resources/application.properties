spring.application.name=gitserver
spring.profiles.active=dev

# [Flyway]
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# [Redis]
spring.data.redis.host=localhost
spring.data.redis.port=6379

# [DynamoDB - \uB85C\uCEEC \uAC1C\uBC1C\uC6A9]
dynamodb.endpoint=${DYNAMODB_ENDPOINT}
dynamodb.region=${DYNAMODB_REGION}
dynamodb.access-key=${DYNAMODB_ACCESS_KEY}
dynamodb.secret-key=${DYNAMODB_SECRET_KEY}
aws.dynamodb.gitIndexTable=${AWS_DYNAMODB_GIT_INDEX_TABLE}

# [AWS(LocalStack) - S3, SQS, SNS]
cloud.aws.region.static=${CLOUD_AWS_REGION_STATIC}
cloud.aws.credentials.access-key=${AWS_ACCESS_KEY_ID}
cloud.aws.credentials.secret-key=${AWS_SECRET_ACCESS_KEY}
cloud.aws.s3.endpoint=${CLOUD_AWS_S3_ENDPOINT}
cloud.aws.sqs.endpoint=${CLOUD_AWS_SQS_ENDPOINT}
cloud.aws.s3.bucket=${CLOUD_AWS_S3_BUCKET}
cloud.aws.s3.public-endpoint=${CLOUD_AWS_S3_PUBLIC_ENDPOINT:}
cloud.aws.sqs.indexing-failure-queue-url=${CLOUD_AWS_SQS_INDEXING_FAILURE_QUEUE_URL:}

# [\uD504\uB860\uD2B8\uC5D4\uB4DC]
app.frontend.base-url=${FRONTEND_BASE_URL:http://localhost:3000}


# [\uAE30\uD0C0 \uACF5\uD1B5]
server.port=8080
spring.jackson.time-zone=Asia/Seoul
spring.jackson.locale=ko_KR
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# [Actuator]
management.endpoints.web.exposure.include=health,info,metrics,prometheus,circuitbreakers,circuitbreakerevents
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}

# [Resilience4j]
resilience4j.circuitbreaker.instances.s3.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.s3.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.s3.sliding-window-size=10
resilience4j.circuitbreaker.instances.s3.minimum-number-of-calls=5

resilience4j.circuitbreaker.instances.dynamodb.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.dynamodb.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.dynamodb.sliding-window-size=10
resilience4j.circuitbreaker.instances.dynamodb.minimum-number-of-calls=5

resilience4j.circuitbreaker.instances.opensearch.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.opensearch.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.opensearch.sliding-window-size=10
resilience4j.circuitbreaker.instances.opensearch.minimum-number-of-calls=5

resilience4j.retry.instances.s3.max-attempts=3
resilience4j.retry.instances.s3.wait-duration=200ms
resilience4j.retry.instances.s3.multiplier=2

resilience4j.retry.instances.dynamodb.max-attempts=3
resilience4j.retry.instances.dynamodb.wait-duration=200ms
resilience4j.retry.instances.dynamodb.multiplier=2

resilience4j.retry.instances.opensearch.max-attempts=3
resilience4j.retry.instances.opensearch.wait-duration=200ms
resilience4j.retry.instances.opensearch.multiplier=2

# [GraphQL]
spring.graphql.path=/graphql
spring.graphql.graphiql.enabled=true
spring.graphql.graphiql.path=/graphiql

spring.messages.basename=messages
spring.messages.encoding=UTF-8

# [Mail(Gmail)]
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# [JWT]
jwt.secret=${JWT_SECRET}
jwt.expirationMillis=${JWT_EXPIRATION_MILLIS}

# [SQS - \uC778\uC99D \uBA54\uC77C \uBC1C\uC1A1\uC6A9]
mail.sqs.queue-url=${MAIL_SQS_QUEUE_URL}
cloud.aws.sqs.queue-url=${CLOUD_AWS_SQS_QUEUE_URL}

# [\uC800\uC7A5\uC18C \uACBD\uB85C]
git.storage.bare-path=${GIT_STORAGE_BARE_PATH}
git.storage.workdir-path=${GIT_STORAGE_WORK_PATH}
git.http-backend-path=${GIT_HTTP_BACKEND_PATH}
git.project-root-path=${GIT_PROJECT_ROOT_PATH}
git.server.base-url=${GIT_SERVER_BASE_URL}

logging.level.org.springframework.cache=DEBUG
logging.level.org.springframework.data.redis.cache=DEBUG

spring.devtools.restart.trigger-file=.reloadtrigger